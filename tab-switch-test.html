<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>æ ‡ç­¾é¡µåˆ‡æ¢æµ‹è¯•</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
    }
    
    .tabs {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 20px;
    }
    
    .tab {
      padding: 12px 24px;
      background: #f8f9fa;
      border: 1px solid #ddd;
      border-bottom: none;
      cursor: pointer;
      border-top-left-radius: 4px;
      border-top-right-radius: 4px;
      margin-right: 2px;
    }
    
    .tab.active {
      background: white;
      color: #2196F3;
      font-weight: bold;
    }
    
    .tab-content {
      display: none;
      padding: 20px;
      border: 1px solid #ddd;
      border-top: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .alert {
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
      border: 1px solid transparent;
    }
    
    .alert-success {
      color: #155724;
      background-color: #d4edda;
      border-color: #c3e6cb;
    }
    
    .alert-info {
      color: #0c5460;
      background-color: #d1ecf1;
      border-color: #bee5eb;
    }
    
    button {
      background: #2196F3;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
    }
    
    .rule-item {
      background: white;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 15px;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <h1>ğŸ§ª æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½æµ‹è¯•</h1>
  
  <div id="alertContainer"></div>
  
  <div class="tabs">
    <div class="tab active" id="tab1Btn">ğŸ“‹ å¯è§†åŒ–ç¼–è¾‘</div>
    <div class="tab" id="tab2Btn">ğŸ’» JSONç¼–è¾‘</div>
    <div class="tab" id="tab3Btn">â“ å¸®åŠ©è¯´æ˜</div>
  </div>
  
  <!-- å¯è§†åŒ–ç¼–è¾‘æ ‡ç­¾é¡µ -->
  <div id="tab1Tab" class="tab-content active">
    <h2>å¯è§†åŒ–ç¼–è¾‘é¡µé¢</h2>
    <div id="rulesStatus" class="alert alert-info" style="display: none;">
      æ­£åœ¨åŠ è½½è§„åˆ™åˆ—è¡¨...
    </div>
    <div id="rulesList">
      <div class="rule-item">
        <strong>æµ‹è¯•è§„åˆ™ 1:</strong><br>
        ä»: https://api.example.com/*<br>
        From: https://api.example.com/*<br>
        åˆ°: http://localhost:3000/*
      </div>
      <div class="rule-item">
        <strong>æµ‹è¯•è§„åˆ™ 2:</strong><br>
        ä»: https://test.api.com/*<br>
        åˆ°: http://localhost:8080/*
      </div>
    </div>
    <button id="refreshRulesBtn">ğŸ”„ åˆ·æ–°è§„åˆ™åˆ—è¡¨</button>
  </div>
  
  <!-- JSONç¼–è¾‘æ ‡ç­¾é¡µ -->
  <div id="tab2Tab" class="tab-content">
    <h2>JSONç¼–è¾‘é¡µé¢</h2>
    <textarea style="width: 100%; height: 200px; font-family: monospace;" readonly>
[
  {
    "id": 1,
    "condition": {
      "regexFilter": "^https://api\\.example\\.com(.*)"
    },
    "action": {
      "redirect": {
        "regexSubstitution": "http://localhost:3000\\1"
      }
    }
  }
]
    </textarea>
  </div>
  
  <!-- å¸®åŠ©è¯´æ˜æ ‡ç­¾é¡µ -->
  <div id="tab3Tab" class="tab-content">
    <h2>å¸®åŠ©è¯´æ˜é¡µé¢</h2>
    <div class="alert alert-info">
      <p>è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é¡µé¢ï¼Œç”¨äºéªŒè¯æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
      <p>è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æµ‹è¯•ï¼š</p>
      <ol>
        <li>ç‚¹å‡»ä¸åŒçš„æ ‡ç­¾é¡µï¼Œè§‚å¯Ÿå†…å®¹æ˜¯å¦æ­£ç¡®åˆ‡æ¢</li>
        <li>ä»"å¯è§†åŒ–ç¼–è¾‘"åˆ‡æ¢åˆ°å…¶ä»–æ ‡ç­¾é¡µï¼Œå†åˆ‡æ¢å›æ¥</li>
        <li>æ£€æŸ¥è§„åˆ™åˆ—è¡¨æ˜¯å¦ä»ç„¶æ˜¾ç¤º</li>
        <li>ç‚¹å‡»"åˆ·æ–°è§„åˆ™åˆ—è¡¨"æŒ‰é’®æµ‹è¯•åŠŸèƒ½</li>
      </ol>
    </div>
  </div>
  
  <script>
    // æ¨¡æ‹Ÿè§„åˆ™æ•°æ®
    let testRules = [
      { id: 1, name: 'æµ‹è¯•è§„åˆ™ 1 / Test Rule 1', from: 'https://api.example.com/*', to: 'http://localhost:3000/*' },
      { id: 2, name: 'æµ‹è¯•è§„åˆ™ 2', from: 'https://test.api.com/*', to: 'http://localhost:8080/*' }
    ];
    
    // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
    function showAlert(message, type = 'success') {
      const container = document.getElementById('alertContainer');
      const alert = document.createElement('div');
      alert.className = `alert alert-${type}`;
      alert.textContent = message;
      
      container.appendChild(alert);
      
      setTimeout(() => {
        if (alert.parentNode) {
          alert.parentNode.removeChild(alert);
        }
      }, 3000);
    }
    
    // åˆ‡æ¢æ ‡ç­¾é¡µ
    function switchTab(tabName) {
      console.log('åˆ‡æ¢åˆ°æ ‡ç­¾é¡µ:', tabName);
      
      // éšè—æ‰€æœ‰æ ‡ç­¾é¡µå†…å®¹
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeçŠ¶æ€
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µ
      document.getElementById(tabName + 'Tab').classList.add('active');
      
      // æ¿€æ´»é€‰ä¸­çš„æ ‡ç­¾
      let activeTabId = '';
      if (tabName === 'tab1') {
        activeTabId = 'tab1Btn';
      } else if (tabName === 'tab2') {
        activeTabId = 'tab2Btn';
      } else if (tabName === 'tab3') {
        activeTabId = 'tab3Btn';
      }
      
      const activeTab = document.getElementById(activeTabId);
      if (activeTab) {
        activeTab.classList.add('active');
      }
      
      // æ ¹æ®åˆ‡æ¢çš„æ ‡ç­¾é¡µæ‰§è¡Œç›¸åº”çš„åˆå§‹åŒ–
      if (tabName === 'tab1') {
        // åˆ‡æ¢åˆ°å¯è§†åŒ–ç¼–è¾‘é¡µé¢æ—¶ï¼Œé‡æ–°æ¸²æŸ“è§„åˆ™åˆ—è¡¨
        renderTestRules();
        showAlert('å¯è§†åŒ–ç¼–è¾‘é¡µé¢å·²åŠ è½½ï¼Œè§„åˆ™åˆ—è¡¨å·²åˆ·æ–°', 'success');
      } else if (tabName === 'tab2') {
        showAlert('JSONç¼–è¾‘é¡µé¢å·²åŠ è½½', 'info');
      } else if (tabName === 'tab3') {
        showAlert('å¸®åŠ©è¯´æ˜é¡µé¢å·²åŠ è½½', 'info');
      }
    }
    
    // æ¸²æŸ“æµ‹è¯•è§„åˆ™åˆ—è¡¨
    function renderTestRules() {
      const container = document.getElementById('rulesList');
      const statusContainer = document.getElementById('rulesStatus');
      
      if (!container) return;
      
      console.log('æ­£åœ¨æ¸²æŸ“è§„åˆ™åˆ—è¡¨...');
      
      // æ›´æ–°çŠ¶æ€æç¤º
      if (statusContainer) {
        statusContainer.style.display = 'block';
        statusContainer.textContent = `åˆ·æ–°è§„åˆ™åˆ—è¡¨...ï¼ˆå½“å‰ ${testRules.length} æ¡è§„åˆ™ï¼‰`;
        statusContainer.className = 'alert alert-info';
      }
      
      // æ¨¡æ‹ŸåŠ è½½å»¶è¿Ÿ
      setTimeout(() => {
        container.innerHTML = testRules.map((rule, index) => {
          return `
            <div class="rule-item">
              <strong>${rule.name}:</strong><br>
              ä»: ${rule.from}<br>
              åˆ°: ${rule.to}<br>
              <small>æ¸²æŸ“æ—¶é—´: ${new Date().toLocaleTimeString()}</small>
            </div>
          `;
        }).join('');
        
        // æ›´æ–°çŠ¶æ€æç¤ºä¸ºæˆåŠŸ
        if (statusContainer) {
          statusContainer.style.display = 'block';
          statusContainer.textContent = `âœ… è§„åˆ™åˆ—è¡¨å·²æ›´æ–°ï¼å½“å‰å…±æœ‰ ${testRules.length} æ¡é‡å®šå‘è§„åˆ™`;
          statusContainer.className = 'alert alert-success';
          
          // 3ç§’åéšè—çŠ¶æ€æç¤º
          setTimeout(() => {
            statusContainer.style.display = 'none';
          }, 3000);
        }
        
        console.log('è§„åˆ™åˆ—è¡¨æ¸²æŸ“å®Œæˆ');
      }, 500);
    }
    
    // é¡µé¢åŠ è½½å®Œæˆæ—¶è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
    document.addEventListener('DOMContentLoaded', function() {
      // è®¾ç½®æ ‡ç­¾é¡µåˆ‡æ¢äº‹ä»¶
      document.getElementById('tab1Btn').addEventListener('click', () => switchTab('tab1'));
      document.getElementById('tab2Btn').addEventListener('click', () => switchTab('tab2'));
      document.getElementById('tab3Btn').addEventListener('click', () => switchTab('tab3'));
      
      // è®¾ç½®åˆ·æ–°æŒ‰é’®äº‹ä»¶
      document.getElementById('refreshRulesBtn').addEventListener('click', () => {
        renderTestRules();
        showAlert('æ‰‹åŠ¨åˆ·æ–°è§„åˆ™åˆ—è¡¨', 'info');
      });
      
      // åˆå§‹æ¸²æŸ“
      renderTestRules();
      showAlert('æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆï¼å¯ä»¥å¼€å§‹æµ‹è¯•æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½', 'success');
    });
  </script>
</body>
</html>
