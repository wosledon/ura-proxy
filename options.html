<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title id="pageTitle"></title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
      background: #f5f5f5;
    }
    
    .container {
      background: white;
      border-radius: 8px;
      padding: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    h1 {
      color: #2196F3;
      border-bottom: 2px solid #2196F3;
      padding-bottom: 10px;
      margin-bottom: 30px;
    }
    
    h2 {
      color: #388e3c;
      margin-top: 30px;
      margin-bottom: 15px;
    }
    
    .rule-editor {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
      color: #333;
    }
    
    input, textarea, select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      font-family: monospace;
      box-sizing: border-box;
    }
    
    textarea {
      min-height: 200px;
      font-family: 'Courier New', monospace;
      white-space: pre;
      overflow-wrap: normal;
      overflow-x: auto;
    }
    
    button {
      background: #2196F3;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    button:hover {
      background: #1976D2;
    }
    
    .btn-success {
      background: #4CAF50;
    }
    
    .btn-success:hover {
      background: #45a049;
    }
    
    .btn-danger {
      background: #f44336;
    }
    
    .btn-danger:hover {
      background: #da190b;
    }
    
    .btn-warning {
      background: #ff9800;
    }
    
    .btn-warning:hover {
      background: #e68900;
    }
    
    .btn-primary {
      background: #2196F3;
    }
    
    .btn-primary:hover {
      background: #1976D2;
    }
    
    .rule-item {
      background: white;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 15px;
      margin: 10px 0;
      position: relative;
      transition: opacity 0.3s;
    }
    
    .rule-item.rule-disabled {
      opacity: 0.6;
      background: #f8f8f8;
    }
    
    .rule-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      position: relative;
      min-height: 32px;
    }
    .rule-title {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 8px;
      min-width: 0;
    }
    .rule-actions {
      display: flex;
      gap: 8px;
      margin-left: 10px;
      z-index: 1;
      align-items: center;
    }
    .rule-actions button {
      padding: 4px 10px;
      font-size: 12px;
      border-radius: 3px;
      margin-bottom: 0;
      margin-right: 0;
      min-width: 40px;
      display: flex;
      align-items: center;
      height: 32px;
    }
    .rule-toggle {
      position: static;
      width: auto;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
      margin-left: 0;
    }
    .rule-toggle .toggle-switch {
      width: 34px;
      height: 20px;
      display: flex;
      align-items: center;
      position: relative;
    }
    .rule-toggle .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .rule-toggle .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 20px;
    }
    .rule-toggle .toggle-slider:before {
      position: absolute;
      content: "";
      height: 14px;
      width: 14px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    .rule-toggle input:checked + .toggle-slider {
      background-color: #4CAF50;
    }
    .rule-toggle input:checked + .toggle-slider:before {
      transform: translateX(14px);
    }
    
    .rule-details {
      font-family: monospace;
      font-size: 13px;
      color: #666;
    }
    
    .alert {
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
      border: 1px solid transparent;
    }
    
    .alert-success {
      color: #155724;
      background-color: #d4edda;
      border-color: #c3e6cb;
    }
    
    .alert-danger {
      color: #721c24;
      background-color: #f8d7da;
      border-color: #f5c6cb;
    }
    
    .alert-info {
      color: #0c5460;
      background-color: #d1ecf1;
      border-color: #bee5eb;
    }
    
    .alert-warning {
      color: #856404;
      background-color: #fff3cd;
      border-color: #ffeaa7;
    }
    
    .tabs {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .tab {
      padding: 12px 20px;
      background: #f8f9fa;
      border: 1px solid #ddd;
      border-bottom: none;
      cursor: pointer;
      border-top-left-radius: 4px;
      border-top-right-radius: 4px;
      margin-right: 2px;
      white-space: nowrap;
      font-size: 14px;
    }
    
    .tab.active {
      background: white;
      color: #2196F3;
      font-weight: bold;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .quick-add {
      background: #e3f2fd;
      border: 1px solid #2196F3;
      border-radius: 6px;
      padding: 20px;
      margin: 20px 0;
    }
    
    .quick-add h3 {
      margin-top: 0;
      color: #1976D2;
    }
    
    .form-row {
      display: flex;
      gap: 15px;
      align-items: end;
    }
    
    .form-col {
      flex: 1;
    }
    
    .form-col-auto {
      flex: none;
    }
  </style>
  <script src="i18n.js"></script>
</head>
<body>
  <div class="lang-select" style="float:right; margin-bottom:10px;">
    <label for="langSelect">ğŸŒ</label>
    <select id="langSelect">
      <option value="zh">ä¸­æ–‡</option>
      <option value="en">English</option>
    </select>
  </div>
  <div class="container">
    <h1 id="mainTitle"></h1>
    
    <div id="alertContainer"></div>
    
    <!-- æ‰©å±•çŠ¶æ€æ˜¾ç¤º -->
    <div class="alert alert-info">
      <strong>ğŸ”„ <span id="extStatusTitle"></span></strong>
      <span id="extensionStatus">...</span>
      <button id="refreshStatusBtn" style="margin-left: 10px; padding: 4px 8px; font-size: 12px;"></button>
    </div>

    <!-- protobufè½¬æ¢é…ç½® -->
    <div class="alert alert-warning">
      <strong>ğŸ”§ <span id="protoTitle"></span></strong>
      <label style="display: inline; margin-left: 15px; margin-right: 10px;">
        <input type="checkbox" id="enableProtoConversion" style="width: auto; margin-right: 5px;">
        <span id="protoSwitchLabel"></span>
      </label>
      <button id="refreshProtoStatusBtn" style="margin-left: 10px; padding: 4px 8px; font-size: 12px;"></button>
      <div id="protoConversionStatus" style="margin-top: 8px; font-size: 13px; color: #666;">...</div>
    </div>
    
    <div class="tabs">
      <div class="tab active" id="visualTabBtn"></div>
      <div class="tab" id="apiMappingTabBtn"></div>
      <div class="tab" id="requestInterceptTabBtn"></div>
      <div class="tab" id="jsonTabBtn"></div>
      <div class="tab" id="helpTabBtn"></div>
    </div>
    
    <!-- å¯è§†åŒ–ç¼–è¾‘æ ‡ç­¾é¡µ -->
    <div id="visualTab" class="tab-content active">
      
      <!-- å¿«é€Ÿæ·»åŠ è§„åˆ™ -->
      <div class="quick-add">
        <h3>â• å¿«é€Ÿæ·»åŠ é‡å®šå‘è§„åˆ™</h3>
        <div class="form-row">
          <div class="form-col">
            <label>æºåŸŸå (ä¾‹: api.example.com / Example: api.example.com)</label>
            <input type="text" id="quickDomain" placeholder="api.example.com / Example: api.example.com">
          </div>
          <div class="form-col">
            <label>æºè·¯å¾„ (ä¾‹: /api/v1 æˆ–ç•™ç©º)</label>
            <input type="text" id="quickPath" placeholder="/api/v1">
          </div>
          <div class="form-col">
            <label>æœ¬åœ°ç«¯å£</label>
            <input type="number" id="quickPort" placeholder="3000" value="3000">
          </div>
          <div class="form-col-auto">
            <button id="addQuickRuleBtn" class="btn-success">æ·»åŠ è§„åˆ™</button>
          </div>
        </div>
        <div class="form-row" style="margin-top: 15px;">
          <div class="form-col">
            <label style="display: flex; align-items: center;">
              <input type="checkbox" id="quickRuleProtoConversion" style="width: auto; margin-right: 8px;">
              æ­¤è§„åˆ™å¯ç”¨ Protobuf â†’ JSON è½¬æ¢
            </label>
            <small style="color: #666; font-size: 12px;">
              å‹¾é€‰æ­¤é¡¹å°†åœ¨è§„åˆ™ä¸­æ ‡è®°éœ€è¦åè®®è½¬æ¢ï¼ˆå‰ç«¯protobuf â†’ æœ¬åœ°JSONï¼‰
            </small>
          </div>
        </div>
      </div>
      
      <!-- ç°æœ‰è§„åˆ™åˆ—è¡¨ -->
      <h2>ğŸ“‹ ç°æœ‰è§„åˆ™åˆ—è¡¨</h2>
      <div id="rulesStatus" class="alert alert-info" style="display: none;">
        æ­£åœ¨åŠ è½½è§„åˆ™åˆ—è¡¨...
      </div>
      <div id="rulesList"></div>
      
      <div style="margin-top: 30px;">
        <button id="saveRulesBtn" class="btn-success">ğŸ’¾ ä¿å­˜æ‰€æœ‰è§„åˆ™</button>
        <button id="exportRulesBtn" class="btn-warning">ğŸ“¥ å¯¼å‡ºåˆ°rules.json</button>
        <button id="previewMergedRulesBtn" class="btn-warning">ğŸ‘€ é¢„è§ˆåˆå¹¶è§„åˆ™</button>
        <button id="loadDefaultRulesBtn" class="btn-warning">ğŸ”„ æ¢å¤é»˜è®¤è§„åˆ™</button>
        <button id="clearAllRulesBtn" class="btn-danger">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰è§„åˆ™</button>
      </div>
    </div>
    
    <!-- æ¥å£æ˜ å°„æ ‡ç­¾é¡µ -->
    <div id="apiMappingTab" class="tab-content">
      <h2>ğŸ”„ æ¥å£è·¯å¾„æ˜ å°„</h2>
      
      <div class="alert alert-info">
        <strong>ğŸ’¡ åŠŸèƒ½è¯´æ˜ï¼š</strong>
        ç”¨äºæ¥å£é‡æ„æ—¶çš„è·¯å¾„æ˜ å°„ï¼Œä¾‹å¦‚å‰ç«¯è°ƒç”¨ /api/v1/userï¼Œæ˜ å°„åˆ°æœ¬åœ°çš„ /api/v2/user
      </div>
      
      <!-- å¿«é€Ÿæ·»åŠ æ¥å£æ˜ å°„ -->
      <div class="quick-add">
        <h3>â• å¿«é€Ÿæ·»åŠ æ¥å£æ˜ å°„</h3>
        <div class="form-row">
          <div class="form-col">
            <label>æºæ¥å£è·¯å¾„ (ä¾‹: /api/v1/user)</label>
            <input type="text" id="mappingSourcePath" placeholder="/api/v1/user">
          </div>
          <div class="form-col">
            <label>ç›®æ ‡æ¥å£è·¯å¾„ (ä¾‹: /api/v2/user)</label>
            <input type="text" id="mappingTargetPath" placeholder="/api/v2/user">
          </div>
          <div class="form-col">
            <label>åŸŸå (ä¾‹: api.example.com / Example: api.example.com)</label>
            <input type="text" id="mappingDomain" placeholder="api.example.com / Example: api.example.com">
          </div>
          <div class="form-col">
            <label>æœ¬åœ°ç«¯å£</label>
            <input type="number" id="mappingPort" placeholder="3000" value="3000">
          </div>
          <div class="form-col-auto">
            <button id="addMappingBtn" class="btn-success">æ·»åŠ æ˜ å°„</button>
          </div>
        </div>
        <div class="form-row" style="margin-top: 15px;">
          <div class="form-col">
            <label style="display: flex; align-items: center;">
              <input type="checkbox" id="mappingProtoConversion" style="width: auto; margin-right: 8px;">
              æ­¤æ˜ å°„å¯ç”¨ Protobuf â†’ JSON è½¬æ¢
            </label>
          </div>
          <div class="form-col">
            <label>è¯·æ±‚æ–¹æ³• (å¯é€‰)</label>
            <select id="mappingMethod">
              <option value="">æ‰€æœ‰æ–¹æ³•</option>
              <option value="GET">GET</option>
              <option value="POST">POST</option>
              <option value="PUT">PUT</option>
              <option value="DELETE">DELETE</option>
              <option value="PATCH">PATCH</option>
            </select>
          </div>
        </div>
      </div>
      
      <!-- æ¥å£æ˜ å°„åˆ—è¡¨ -->
      <h2>ğŸ“‹ æ¥å£æ˜ å°„åˆ—è¡¨</h2>
      <div id="mappingStatus" class="alert alert-info" style="display: none;">
        æ­£åœ¨åŠ è½½æ˜ å°„åˆ—è¡¨...
      </div>
      <div id="mappingsList"></div>
      
      <div style="margin-top: 30px;">
        <button id="saveMappingsBtn" class="btn-success">ğŸ’¾ ä¿å­˜æ‰€æœ‰æ˜ å°„</button>
        <button id="exportMappingsBtn" class="btn-warning">ğŸ“¥ å¯¼å‡ºæ˜ å°„é…ç½®</button>
        <button id="clearAllMappingsBtn" class="btn-danger">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰æ˜ å°„</button>
      </div>
    </div>
    
    <!-- è¯·æ±‚è§£ææ ‡ç­¾é¡µ -->
    <div id="requestInterceptTab" class="tab-content">
      <h2>ğŸ” HTTP è¯·æ±‚è§£æ</h2>
      
      <div class="alert alert-info">
        <strong>ğŸ’¡ åŠŸèƒ½è¯´æ˜ï¼š</strong>
        æ‹¦æˆªå¹¶è§£æ HTTP è¯·æ±‚ï¼Œå°† Protobuf è´Ÿè½½è½¬æ¢ä¸ºå¯è¯»çš„ JSON æ ¼å¼ï¼Œä¾¿äºå¼€å‘è°ƒè¯•
      </div>
      
      <!-- æ‹¦æˆªé…ç½® -->
      <div class="quick-add">
        <h3>âš™ï¸ æ‹¦æˆªé…ç½®</h3>
        <div class="form-row">
          <div class="form-col">
            <label style="display: flex; align-items: center;">
              <input type="checkbox" id="enableRequestIntercept" style="width: auto; margin-right: 8px;">
              å¯ç”¨è¯·æ±‚æ‹¦æˆªå’Œè§£æ
            </label>
          </div>
          <div class="form-col">
            <label>æ‹¦æˆªåŸŸåè¿‡æ»¤ (ç•™ç©ºè¡¨ç¤ºæ‰€æœ‰åŸŸå)</label>
            <input type="text" id="interceptDomainFilter" placeholder="ä¾‹: api.example.com / Example: api.example.com">
          </div>
        </div>
        <div class="form-row" style="margin-top: 15px;">
          <div class="form-col">
            <label>æ‹¦æˆªè·¯å¾„è¿‡æ»¤ (æ”¯æŒé€šé…ç¬¦ *)</label>
            <input type="text" id="interceptPathFilter" placeholder="ä¾‹: /api/*, /proto/*">
          </div>
          <div class="form-col">
            <label>æœ€å¤§è®°å½•æ•°é‡</label>
            <input type="number" id="maxRecordCount" placeholder="100" value="100" min="10" max="1000">
          </div>
        </div>
        <div class="form-row" style="margin-top: 15px;">
          <div class="form-col">
            <button id="saveInterceptConfigBtn" class="btn-success">ğŸ’¾ ä¿å­˜é…ç½®</button>
            <button id="clearInterceptLogsBtn" class="btn-warning">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
            <button id="exportInterceptLogsBtn" class="btn-warning">ğŸ“¥ å¯¼å‡ºæ—¥å¿—</button>
            <button id="openRequestPanelBtn" class="btn-primary">ğŸ›ï¸ å¼€å¯å³ä¾§è¯·æ±‚é¢æ¿</button>
          </div>
        </div>
      </div>
      
      <!-- å®æ—¶è¯·æ±‚æ—¥å¿— -->
      <h2>ğŸ“‹ å®æ—¶è¯·æ±‚æ—¥å¿—</h2>
      <div id="interceptStatus" class="alert alert-info">
        æ‹¦æˆªçŠ¶æ€ï¼šæœªå¯ç”¨
      </div>
      
      <!-- è¿‡æ»¤å’Œæœç´¢ -->
      <div class="form-row" style="margin-bottom: 15px;">
        <div class="form-col">
          <input type="text" id="logSearchFilter" placeholder="æœç´¢è¯·æ±‚ URLã€æ–¹æ³•æˆ–å†…å®¹...">
        </div>
        <div class="form-col-auto">
          <button id="refreshLogsBtn">ğŸ”„ åˆ·æ–°</button>
          <button id="pauseLogsBtn">â¸ï¸ æš‚åœ</button>
        </div>
      </div>
      
      <div id="requestLogsList"></div>
    </div>
    
    <!-- JSONç¼–è¾‘æ ‡ç­¾é¡µ -->
    <div id="jsonTab" class="tab-content">
      <h2>ğŸ’» JSONæ ¼å¼ç¼–è¾‘</h2>
      <div class="form-group">
        <label>é‡å®šå‘è§„åˆ™ JSON (é«˜çº§ç”¨æˆ·)</label>
        <textarea id="jsonEditor" placeholder="åœ¨è¿™é‡Œç¼–è¾‘JSONæ ¼å¼çš„è§„åˆ™..."></textarea>
      </div>
      <div>
        <button id="saveJsonRulesBtn" class="btn-success">ğŸ’¾ ä¿å­˜JSONè§„åˆ™</button>
        <button id="formatJsonBtn" class="btn-warning">ğŸ¨ æ ¼å¼åŒ–JSON</button>
        <button id="validateJsonBtn" class="btn-warning">âœ… éªŒè¯JSON</button>
        <button id="loadJsonBtn" class="btn-warning">ğŸ”„ é‡æ–°åŠ è½½</button>
      </div>
    </div>
    
    <!-- å¸®åŠ©è¯´æ˜æ ‡ç­¾é¡µ -->
    <div id="helpTab" class="tab-content">
      <h2>â“ ä½¿ç”¨è¯´æ˜</h2>
      
      <div class="alert alert-info">
        <strong>ğŸ’¡ æ¸©é¦¨æç¤ºï¼š</strong>
        <ul>
          <li>ä¿®æ”¹è§„åˆ™åä¼šè‡ªåŠ¨ä¿å­˜åˆ°æµè§ˆå™¨æœ¬åœ°å­˜å‚¨</li>
          <li>è¦ä½¿è§„åˆ™ç«‹å³ç”Ÿæ•ˆï¼Œè¯·ç‚¹å‡»"å¯¼å‡ºåˆ°rules.json"æŒ‰é’®ä¸‹è½½æ–°çš„rules.jsonæ–‡ä»¶</li>
          <li>å°†ä¸‹è½½çš„rules.jsonæ–‡ä»¶æ›¿æ¢æ‰©å±•ç›®å½•ä¸­çš„åŒåæ–‡ä»¶</li>
          <li>åœ¨Chromeæ‰©å±•ç®¡ç†é¡µé¢é‡æ–°åŠ è½½æ­¤æ‰©å±•</li>
          <li>æ”¯æŒå¯è§†åŒ–ç¼–è¾‘å’ŒJSONç›´æ¥ç¼–è¾‘ä¸¤ç§æ–¹å¼</li>
        </ul>
      </div>
      
      <h3>ğŸ¯ è§„åˆ™é…ç½®è¯´æ˜</h3>
      <p><strong>æºåŸŸåï¼š</strong>è¦æ‹¦æˆªçš„APIåŸŸåï¼Œå¦‚ <code>api.example.com</code> / <strong>Source Domain:</strong> The API domain to intercept, e.g. <code>api.example.com</code></p>
      <p><strong>æºè·¯å¾„ï¼š</strong>å¯é€‰ï¼ŒæŒ‡å®šè·¯å¾„å‰ç¼€ï¼Œå¦‚ <code>/api/v1</code></p>
      <p><strong>æœ¬åœ°ç«¯å£ï¼š</strong>é‡å®šå‘åˆ°æœ¬åœ°æœåŠ¡å™¨çš„ç«¯å£å·</p>
      <p><strong>Protobufè½¬æ¢ï¼š</strong>é€‚ç”¨äºå‰ç«¯ä½¿ç”¨protobufæ ¼å¼ä¸ç½‘å…³é€šä¿¡ï¼Œä½†æœ¬åœ°å¼€å‘ç¯å¢ƒä½¿ç”¨JSONæ ¼å¼çš„åœºæ™¯</p>
      
      <h3>ğŸ”„ æ¥å£æ˜ å°„åŠŸèƒ½</h3>
      <div class="rule-editor">
        <p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
        <ul>
          <li>æ¥å£é‡æ„ï¼šå‰ç«¯è°ƒç”¨ /api/v1/userï¼Œåç«¯å·²å‡çº§åˆ° /api/v2/user</li>
          <li>è·¯å¾„å˜æ›´ï¼šå‰ç«¯è°ƒç”¨ /old/pathï¼Œéœ€è¦æ˜ å°„åˆ° /new/path</li>
          <li>ç‰ˆæœ¬å…¼å®¹ï¼šæ”¯æŒå¤šä¸ªAPIç‰ˆæœ¬ä¹‹é—´çš„è·¯å¾„è½¬æ¢</li>
        </ul>
        <p><strong>é…ç½®ç¤ºä¾‹ï¼š</strong></p>
        <ul>
          <li>æºè·¯å¾„ï¼š<code>/api/v1/user</code></li>
          <li>ç›®æ ‡è·¯å¾„ï¼š<code>/api/v2/user</code></li>
          <li>åŸŸåï¼š<code>api.example.com</code> / Domain: <code>api.example.com</code></li>
          <li>æœ¬åœ°ç«¯å£ï¼š<code>3000</code></li>
        </ul>
        <p><strong>ç»“æœï¼š</strong>å‰ç«¯è¯·æ±‚ <code>https://api.example.com/api/v1/user</code> ä¼šè¢«é‡å®šå‘åˆ° <code>http://localhost:3000/api/v2/user</code> / <strong>Result:</strong> Frontend request <code>https://api.example.com/api/v1/user</code> will be redirected to <code>http://localhost:3000/api/v2/user</code></p>
      </div>
      
      <h3>ğŸ”§ Protobuf è½¬æ¢åŠŸèƒ½</h3>
      <div class="rule-editor">
        <p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
        <ul>
          <li>ç”Ÿäº§ç¯å¢ƒï¼šå‰ç«¯ â†’ ç½‘å…³ï¼ˆProtobuf æ ¼å¼ï¼‰</li>
          <li>å¼€å‘ç¯å¢ƒï¼šå‰ç«¯ â†’ æœ¬åœ°æœåŠ¡ï¼ˆJSON æ ¼å¼ï¼‰</li>
        </ul>
        <p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p>
        <ol>
          <li>åœ¨é¡µé¢é¡¶éƒ¨å¯ç”¨ "Protobuf â†’ JSON è½¬æ¢" å…¨å±€å¼€å…³</li>
          <li>ä¸ºç‰¹å®šè§„åˆ™å¯ç”¨è½¬æ¢æ ‡è®°ï¼ˆåœ¨å¿«é€Ÿæ·»åŠ æˆ–ç¼–è¾‘è§„åˆ™æ—¶è®¾ç½®ï¼‰</li>
          <li>ç¡®ä¿æœ¬åœ°æœåŠ¡å™¨æ”¯æŒç›¸åº”çš„JSONæ ¼å¼æ¥å£</li>
        </ol>
        <p><strong>æ³¨æ„ï¼š</strong>æ­¤åŠŸèƒ½éœ€è¦é…åˆç›¸åº”çš„ä»£ç†æœåŠ¡å™¨æˆ–è½¬æ¢ä¸­é—´ä»¶ä½¿ç”¨</p>
      </div>
      
      <h3>ğŸš€ å¿«é€Ÿæµ‹è¯•</h3>
      <div class="rule-editor">
        <p><strong>æµ‹è¯•é‡å®šå‘è§„åˆ™ï¼š</strong></p>
        <pre><code>fetch('https://example.com/api/test')
  .then(response => {
    console.log('âœ… é‡å®šå‘æˆåŠŸï¼å“åº”æ¥æº:', response.url);
    return response.json();
  })
  .then(data => console.log('ğŸ“„ å“åº”æ•°æ®:', data))
  .catch(error => console.log('âŒ è¯·æ±‚å¤±è´¥:', error));</code></pre>
  
        <p><strong>æµ‹è¯•æ¥å£æ˜ å°„ï¼š</strong></p>
        <pre><code>// å‡è®¾é…ç½®äº† /api/v1/user â†’ /api/v2/user çš„æ˜ å°„
fetch('https://api.example.com/api/v1/user/123') // ç¤ºä¾‹ / Example
  .then(response => {
    console.log('âœ… æ˜ å°„æˆåŠŸï¼å®é™…è¯·æ±‚:', response.url);
    // å®é™…ä¼šè¯·æ±‚åˆ°: http://localhost:3000/api/v2/user/123
    return response.json();
  })
  .then(data => console.log('ğŸ“„ ç”¨æˆ·æ•°æ®:', data))
  .catch(error => console.log('âŒ è¯·æ±‚å¤±è´¥:', error));</code></pre>
      </div>
      
      <h3>ï¿½ è¯·æ±‚è§£æåŠŸèƒ½</h3>
      <div class="rule-editor">
        <p><strong>åŠŸèƒ½è¯´æ˜ï¼š</strong></p>
        <ul>
          <li>è‡ªåŠ¨æ‹¦æˆªå¹¶è®°å½•é¡µé¢å‘å‡ºçš„æ‰€æœ‰ HTTP è¯·æ±‚</li>
          <li>æ”¯æŒ fetch API å’Œ XMLHttpRequest ä¸¤ç§è¯·æ±‚æ–¹å¼</li>
          <li>å¯å±•ç¤ºè¯·æ±‚å’Œå“åº”çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ protobuf æ ¼å¼æ•°æ®</li>
          <li>æä¾›å®æ—¶æ—¥å¿—æŸ¥çœ‹ï¼Œä¾¿äºå‰ç«¯ä¸ç½‘å…³äº¤äº’çš„è°ƒè¯•</li>
        </ul>
        
        <p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
        <ol>
          <li>åˆ‡æ¢åˆ°"ğŸ” è¯·æ±‚è§£æ"æ ‡ç­¾é¡µ</li>
          <li>é…ç½®è¦æ‹¦æˆªçš„ URL æ¨¡å¼ï¼ˆæ”¯æŒé€šé…ç¬¦ *ï¼‰</li>
          <li>å¯ç”¨è¯·æ±‚æ‹¦æˆªåŠŸèƒ½</li>
          <li>åœ¨ç›®æ ‡ç½‘é¡µä¸­è§¦å‘ HTTP è¯·æ±‚</li>
          <li>å›åˆ°è¯·æ±‚è§£æé¡µé¢æŸ¥çœ‹å®æ—¶æ—¥å¿—</li>
        </ol>
        
        <p><strong>é…ç½®ç¤ºä¾‹ï¼š</strong></p>
        <ul>
          <li><code>https://api.example.com/*</code> - æ‹¦æˆªè¯¥åŸŸåä¸‹æ‰€æœ‰è¯·æ±‚ / Intercept all requests under this domain</li>
          <li><code>*/api/v1/*</code> - æ‹¦æˆªæ‰€æœ‰åŒ…å« /api/v1/ çš„è¯·æ±‚</li>
          <li><code>https://*/user*</code> - æ‹¦æˆªæ‰€æœ‰ä»¥ user å¼€å¤´çš„è¯·æ±‚è·¯å¾„</li>
        </ul>
        
        <p><strong>æ—¥å¿—ä¿¡æ¯åŒ…å«ï¼š</strong></p>
        <ul>
          <li>è¯·æ±‚æ—¶é—´æˆ³å’Œå“åº”è€—æ—¶</li>
          <li>HTTP æ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETE ç­‰ï¼‰</li>
          <li>è¯·æ±‚ URL å’ŒçŠ¶æ€ç </li>
          <li>è¯·æ±‚å¤´å’Œå“åº”å¤´ä¿¡æ¯</li>
          <li>è¯·æ±‚ä½“å’Œå“åº”ä½“å†…å®¹ï¼ˆåŒ…æ‹¬ protobuf äºŒè¿›åˆ¶æ•°æ®çš„æ ‡è¯†ï¼‰</li>
        </ul>
        
        <p><strong>é«˜çº§åŠŸèƒ½ï¼š</strong></p>
        <ul>
          <li><strong>æœç´¢è¿‡æ»¤ï¼š</strong>åœ¨æœç´¢æ¡†ä¸­è¾“å…¥å…³é”®è¯å¿«é€Ÿå®šä½ç‰¹å®šè¯·æ±‚</li>
          <li><strong>æš‚åœè®°å½•ï¼š</strong>ç‚¹å‡»"æš‚åœ"æŒ‰é’®åœæ­¢æ–°è¯·æ±‚çš„è®°å½•</li>
          <li><strong>æ¸…ç©ºæ—¥å¿—ï¼š</strong>æ¸…é™¤å½“å‰æ˜¾ç¤ºçš„æ‰€æœ‰è¯·æ±‚è®°å½•</li>
          <li><strong>å¯¼å‡ºæ—¥å¿—ï¼š</strong>å°†è¯·æ±‚æ—¥å¿—å¯¼å‡ºä¸º JSON æ–‡ä»¶ï¼Œä¾¿äºåˆ†æå’Œåˆ†äº«</li>
        </ul>
        
        <p><strong>Protobuf æ”¯æŒï¼š</strong></p>
        <ul>
          <li>è‡ªåŠ¨è¯†åˆ« protobuf æ ¼å¼çš„è¯·æ±‚å’Œå“åº”</li>
          <li>æ˜¾ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„åŸºæœ¬ä¿¡æ¯ï¼ˆå¦‚æ•°æ®é•¿åº¦ï¼‰</li>
          <li>å¯¹äºå·²çŸ¥çš„ protobuf ç»“æ„ï¼Œå¯é…åˆè½¬æ¢åŠŸèƒ½æŸ¥çœ‹ JSON æ ¼å¼</li>
        </ul>
        
        <p><strong>å…¸å‹ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
        <ul>
          <li><strong>API è°ƒè¯•ï¼š</strong>æŸ¥çœ‹å‰ç«¯ä¸åç«¯çš„å®Œæ•´äº¤äº’è¿‡ç¨‹</li>
          <li><strong>æ€§èƒ½åˆ†æï¼š</strong>åˆ†æè¯·æ±‚å“åº”æ—¶é—´ï¼Œå®šä½æ€§èƒ½ç“¶é¢ˆ</li>
          <li><strong>åè®®è°ƒè¯•ï¼š</strong>éªŒè¯ protobuf æ•°æ®çš„æ­£ç¡®æ€§</li>
          <li><strong>é”™è¯¯æ’æŸ¥ï¼š</strong>å¿«é€Ÿå®šä½å¤±è´¥çš„è¯·æ±‚å’Œé”™è¯¯åŸå› </li>
          <li><strong>æ¥å£æµ‹è¯•ï¼š</strong>éªŒè¯æ–°å¼€å‘çš„æ¥å£æ˜¯å¦æ­£å¸¸å·¥ä½œ</li>
        </ul>
      </div>
      
      <h3>ï¿½ğŸ”„ è§„åˆ™åŒæ­¥è¯´æ˜</h3>
      <div class="rule-editor">
        <p><strong>æœ¬åœ°å­˜å‚¨ä¸è§„åˆ™æ–‡ä»¶åŒæ­¥ï¼š</strong></p>
        <ol>
          <li>åœ¨æ­¤é¡µé¢ä¿®æ”¹çš„è§„åˆ™ä¼šä¿å­˜åˆ°æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ï¼ˆlocalStorageï¼‰</li>
          <li>ç‚¹å‡»"å¯¼å‡ºåˆ°rules.json"æŒ‰é’®ä¸‹è½½æœ€æ–°çš„è§„åˆ™æ–‡ä»¶</li>
          <li>å°†ä¸‹è½½çš„rules.jsonæ›¿æ¢æ‰©å±•ç›®å½•ä¸­çš„åŒåæ–‡ä»¶</li>
          <li>åœ¨chrome://extensionsé¡µé¢ç‚¹å‡»æ‰©å±•çš„"é‡æ–°åŠ è½½"æŒ‰é’®</li>
          <li>æ–°è§„åˆ™ç«‹å³ç”Ÿæ•ˆï¼</li>
        </ol>
      </div>
      
      <h3>âš ï¸ æ³¨æ„äº‹é¡¹</h3>
      <ul>
        <li>ç¡®ä¿æœ¬åœ°æœåŠ¡å™¨å·²å¯åŠ¨å¹¶ç›‘å¬ç›¸åº”ç«¯å£</li>
        <li>æœ¬åœ°æœåŠ¡å™¨éœ€è¦é…ç½®CORSä»¥æ”¯æŒè·¨åŸŸè¯·æ±‚</li>
        <li>HTTPSåˆ°HTTPçš„é‡å®šå‘å¯èƒ½éœ€è¦åœ¨æµè§ˆå™¨ä¸­å…è®¸æ··åˆå†…å®¹</li>
        <li>ä¿®æ”¹è§„åˆ™åéœ€è¦é‡æ–°åŠ è½½æ‰©å±•æ‰èƒ½ç”Ÿæ•ˆ</li>
      </ul>
    </div>
  </div>
  
  <script>
    // è¯­è¨€åˆ‡æ¢é€»è¾‘
    document.getElementById('langSelect').value = getLang();
    document.getElementById('langSelect').addEventListener('change', function() {
      localStorage.setItem('ura-proxy-lang', this.value);
      location.reload();
    });
    // é¡µé¢åŠ è½½æ—¶æ¸²æŸ“æ‰€æœ‰å›½é™…åŒ–æ–‡æœ¬
    function renderLang() {
      document.title = t('optionsTitle');
      document.getElementById('pageTitle').textContent = t('optionsTitle');
      document.getElementById('mainTitle').textContent = t('optionsTitle');
      document.getElementById('extStatusTitle').textContent = t('extStatusTitle');
      document.getElementById('refreshStatusBtn').textContent = t('refreshStatusBtn');
      document.getElementById('protoTitle').textContent = t('protoTitle');
      document.getElementById('protoSwitchLabel').textContent = t('protoSwitchLabel');
      document.getElementById('refreshProtoStatusBtn').textContent = t('refreshProtoStatusBtn');
      document.getElementById('visualTabBtn').textContent = t('visualTabBtn');
      document.getElementById('apiMappingTabBtn').textContent = t('apiMappingTabBtn');
      document.getElementById('requestInterceptTabBtn').textContent = t('requestInterceptTabBtn');
      document.getElementById('jsonTabBtn').textContent = t('jsonTabBtn');
      document.getElementById('helpTabBtn').textContent = t('helpTabBtn');
      // ...å…¶ä½™æ‰€æœ‰éœ€è¦å›½é™…åŒ–çš„å…ƒç´ åŒç†æ¸²æŸ“...
    }
    window.addEventListener('DOMContentLoaded', renderLang);
  </script>
  <script src="options.js"></script>
</body>
</html>
